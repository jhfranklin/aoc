#! /usr/bin/env bqn
lstâ†â€¢ParseFloatâŒ¾(âŠ‘âŒ½)Ë˜>((âŠ¢-ËœÂ¬Ã—+`)' '=âŠ¢)âŠ¸âŠ”Â¨â€¢FLines â‰ â—¶"07.in"â€¿âŠ‘ â€¢args

Typeâ†{
  1=â‰ ğ•©? 6;    # Five of a kind
  4=âŠ‘ğ•©? 5;    # Four of a kind
  3â€¿2â‰¡ğ•©? 4;   # Full house
  3=âŠ‘ğ•©? 3;    # Three of a kind
  2â€¿2â€¿1â‰¡ğ•©? 2; #Â Two pair
  2=âŠ‘ğ•©? 1;    # One pair
  0           # High card
}

Valueâ†{
  hndâ†"23456789TJQKA"âŠ¸âŠğ•© # Convert to ranks
  dstâ†âˆ¨/â¼âŠğ•©              # Distribution of hand
  typâ†Type dst
  typâ‹ˆhnd
}

â€¢Show +Â´Ã—âŸœ(1+â†•âˆ˜â‰ )(âŠ‘âˆ˜âŒ½Ë˜lst)âŠËœâ‹Valueâˆ˜âŠ‘Ë˜lst # Part 1

ValueJokerâ†{
  hndâ†"J23456789TQKA"âŠ¸âŠğ•©    # Convert to ranks
  dstâ†âˆ¨/â¼âŠğ•©                 # Distribution of hand
  numJsâ†+Â´hnd=0             # Number of jokers
  dst (Â¬Â·Â»âŠ¸<Â·âˆ¨`numJsâŠ¸=)âŠ¸/â†©  # Remove jokers
  dst (âŠ¢â†‘Ëœ1âŒˆâ‰ )â†©             # Hand cannot be empty
  dst numJsâŠ¸+âŒ¾âŠ‘â†©            # Add jokers to highest
  typâ†Type dst
  typâ‹ˆhnd
}

â€¢Show +Â´Ã—âŸœ(1+â†•âˆ˜â‰ )(âŠ‘âˆ˜âŒ½Ë˜lst)âŠËœâ‹ValueJokerâˆ˜âŠ‘Ë˜lst # Part 2
