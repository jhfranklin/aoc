#! /usr/bin/env bqn
lstâ†â€¢ParseFloatâŒ¾(âŠ‘âŒ½)Ë˜>((âŠ¢-ËœÂ¬Ã—+`)' '=âŠ¢)âŠ¸âŠ”Â¨â€¢FLines "07.in"

Valueâ†{
  hndâ†"23456789TJQKA"âŠ¸âŠğ•© # Convert to ranks
  dstâ†âˆ¨/â¼âŠğ•©              # Distribution of hand
  typâ†{
    1=â‰ ğ•©? 6 ;
    4=âŠ‘ğ•©? 5;
    3â€¿2â‰¡ğ•©? 4;
    3=âŠ‘ğ•©? 3;
    2â€¿2â€¿1â‰¡ğ•©? 2;
    2=âŠ‘ğ•©? 1;
    0
  } dst
  typâ‹ˆhnd
}

â€¢Show +Â´Ã—âŸœ(1+â†•âˆ˜â‰ )(âŠ‘âˆ˜âŒ½Ë˜lst)âŠËœâ‹Valueâˆ˜âŠ‘Ë˜lst # Part 1

Value2â†{
  hndâ†"J23456789TQKA"âŠ¸âŠ â€¢Show ğ•©   # Convert to ranks
  dstâ†âˆ¨/â¼âŠğ•©                # Distribution of hand
  numJsâ†+Â´hnd=0            # Number of jokers
  dst (Â¬Â·Â»âŠ¸<Â·âˆ¨`numJsâŠ¸=)âŠ¸/â†© # Remove jokers
  dst ((1âŒˆâ‰ )â†‘âŠ¢)â†©           # Hand cannot be empty
  dst numJsâŠ¸+âŒ¾âŠ‘â†©           # Add jokers to highest
  typâ†{
    1=â‰ ğ•©? 6 ;
    4=âŠ‘ğ•©? 5;
    3â€¿2â‰¡ğ•©? 4;
    3=âŠ‘ğ•©? 3;
    2â€¿2â€¿1â‰¡ğ•©? 2;
    2=âŠ‘ğ•©? 1;
    0
  } dst
  typâ‹ˆhnd
}

â€¢Show +Â´Ã—âŸœ(1+â†•âˆ˜â‰ )(âŠ‘âˆ˜âŒ½Ë˜lst)âŠËœâ‹Value2âˆ˜âŠ‘Ë˜lst # Part 2
