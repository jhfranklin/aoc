#! /usr/bin/env bqn
nâ†â‰ gridâ†>â€¢FLines â‰ â—¶"10.in"â€¿âŠ‘ â€¢args
dirsâ†âŸ¨âŸ¨n,-nâŸ©,âŸ¨1,Â¯1âŸ©,âŸ¨1,-nâŸ©,âŸ¨Â¯1,-nâŸ©,âŸ¨n,Â¯1âŸ©,âŸ¨n,1âŸ©,âŸ¨âŸ©,âŸ¨âŸ©âŸ©
symsâ†"|-LJ7F.S"
gvâ†(â†•nâ‹†2)+dirsâŠËœsymsâŠfâ†â¥Šgrid
stâ†âŠ‘/'S'=f
gv (âˆ¨/âˆ¨Â´Â¨gv=st)âŒ¾(stâŠ¸âŠ‘)â†©
gv (0âŠ¸â‰¤âˆ§<âŸœ(nâ‹†2))âŠ¸/Â¨â†©
stypeâ†âŠ‘symsâŠËœdirsâŠ<stâŠ‘gv-st # Find type of S tile
grid stypeâŒ¾(stâŠ¸âŠ‘â¥Š)â†©         # and replace it
vstdâ†â‰st
{
  nextâ†â·vstd(Â¬âˆ˜âˆŠ/âŠ£)Ëœ âˆ¾âŠ‘âŸœgvÂ¨ğ•©
  vstd âˆ¾âŸœnextâ†©
  next
}â€¢_while_(0â‰ â‰ ) â‰st
â€¢Show 2Ã·Ëœâ‰ vstd # Part 1
â€¢Show +Â´â¥Š(Â¬p)âˆ§(2|+`)(gridâˆŠ"J7-")âˆ§pâ†(2â¥Šn)â¥Š(nâ‹†2)â†‘/â¼vstd # Part 2 (uses even-odd rule)
