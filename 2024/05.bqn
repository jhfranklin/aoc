#! /usr/bin/env bqn
âŸ¨ToNatsâŸ©â†â€¢Import "../bqn-libs/strings.bqn"
inâ†â€¢FLines â‰ â—¶"05.in"â€¿âŠ‘ â€¢args

rsâ€¿usâ†ToNatsâš‡1 ((+`Â»)âŠ¸-(0=â‰ )Â¨)âŠ¸âŠ” in
rs >â†©

Relevantâ†{(âˆ§Â´Ë˜rsâˆŠğ•©)/rs}
CheckOrderâ†{ğ•Š u:
  âˆ§Â´<Â´Ë˜uâŠRelevant ğ•©
}
GetMiddleâ†(0.5Ã—1-Ëœâ‰ )âŠ¸âŠ‘
â€¢Show +Â´GetMiddleÂ¨ CheckOrderÂ¨âŠ¸/ us # Part 1
FixUpdateâ†{ğ•Š u:
  {
    badâ†âŠ>Â´Ë˜âŠ¸/ğ•©âŠreâ†Relevant ğ•© # find first bad rule
    âŒ½âŒ¾(badâŠ¸âŠ) ğ•©               # and swap them
  }â€¢_while_(Â¬CheckOrder) u
}
â€¢Show +Â´GetMiddleÂ¨ FixUpdateÂ¨Â¬âˆ˜CheckOrderÂ¨âŠ¸/ us # Part 2
