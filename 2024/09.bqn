#! /usr/bin/env bqn
inâ†-âŸœ'0'Â¨ â€¢FCharsâ‰ â—¶"09.in"â€¿âŠ‘ â€¢args

dblkâ€¿gblkâ†<Ë˜â‰â†‘â€¿2â¥Šin # gets data blocks and gaps
nâ†+Â´dblk            # how much data is needed
osâ†âŒ½(Â¬2âŠ¸|)âŠ¸/ nâ†“/in  # data outside the needed area
gsâ†2|fâ†nâ†‘/in        # get available gaps
cdâ†2Ã·ËœosâŒ¾(gsâŠ¸/) f   # compacted data 
CheckSumâ†+Â´â†•âˆ˜â‰ âŠ¸Ã— 
â€¢Show CheckSum cd # Part 1

idsâ†2âŠ¸|â—¶âŸ¨Ã·âŸœ2,Â¯1âŸ©Â¨ idxâ†â†•â‰ in
cd2â†inâ€¿ids {i ğ•Š ğ•©:
    0â‰¤iâŠ‘âŠ‘âŒ½ğ•©?
    ğ•© {j ğ•Š ğ•©:
    isâ€¿idâ†iâŠ‘Â¨ ğ•© 
    jsâ€¿jdâ†jâŠ‘Â¨ ğ•©
    (idâ‰¥0)âˆ§(isâ‰¤js)âˆ§jd<0?
    isâ€¿id {jâŠ¸â†‘âˆ¾âŠ£âˆ¾jâŠ¸â†“}Â¨ âŸ¨js-is,Â¯1âŸ©âŒ¾(jâŠ¸âŠ‘Â¨) âŸ¨is,Â¯1âŸ©âŒ¾(iâŠ¸âŠ‘Â¨) ğ•©
    ; ğ•©
  }Â´ âŒ½â†•i
  ;ğ•©
}Â´ idx
â€¢Show CheckSum /Â´0âŒˆcd2 # Part 2
